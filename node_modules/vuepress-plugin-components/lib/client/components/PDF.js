import{defineComponent as w,onMounted as h,h as b}from"vue";import{checkIsMobile as S,checkIsSafari as y,entries as T,useLocaleConfig as P}from"vuepress-shared/client";import"../styles/pdf.scss";import{withBase as F}from"@vuepress/client";import{isString as L,ensureEndingSlash as C}from"@vuepress/shared";import{u as D}from"../size-daba93c1.js";import{g as I}from"../getLink-dfca07b4.js";import"@vueuse/core";const m=e=>{console.error("[PDF]: "+e)},E=e=>{for(;e.firstChild;)e.removeChild(e.firstChild)},N=e=>e==="string"?document.querySelector(e):e instanceof HTMLElement?e:document.body,$=e=>{let t="";return e&&(t+=T(e).map(([i,r])=>i==="noToolbar"?`toolbar=${r?0:1}`:`${encodeURIComponent(i)}=${encodeURIComponent(r)}`).join("&"),t&&(t="#"+t,t=t.slice(0,t.length-1))),t},u=(e,t,i,r,l)=>{E(t);let a=i;e==="pdfjs"&&(a=`${`${C(F(PDFJS_URL))}web/viewer.html`}?file=${encodeURIComponent(i)}${$(r)}`);const n=e==="pdfjs"||e==="iframe"?"iframe":"embed",o=document.createElement(n);return o.className="pdf-viewer",o.type="application/pdf",o.title=l,o.src=a,o instanceof HTMLIFrameElement&&(o.allow="fullscreen"),t.classList.add("pdf-viewer-container"),t.appendChild(o),t.getElementsByTagName(n)[0]},M=(e,t=null,{title:i,hint:r,options:l={}})=>{var a;if(typeof window>"u"||window.navigator===void 0||window.navigator.userAgent===void 0||window.navigator.mimeTypes===void 0)return null;const n=window.navigator,o=window.navigator.userAgent,f=window.Promise!==void 0,d=n.platform!==void 0&&n.platform==="MacIntel"&&n.maxTouchPoints!==void 0&&n.maxTouchPoints>1||S(o),c=!d&&y(o),g=!d&&/irefox/.test(o)&&o.split("rv:").length>1?parseInt(o.split("rv:")[1].split(".")[0],10)>18:!1,v=!d&&(f||g);if(!L(e))return m("URL is not valid"),null;const s=N(t);if(!s)return m("Target element cannot be determined"),null;const p=i||((a=/\/([^/]+).pdf/.exec(e))==null?void 0:a[1])||"PDF Viewer";return v||!d?u(c?"iframe":"embed",s,e,l,p):PDFJS_URL?u("pdfjs",s,e,l,p):(s.innerHTML=r.replace(/\[url\]/g,e),m("This browser does not support embedded PDFs"),null)};var R=w({name:"PDF",props:{url:{type:String,required:!0},title:{type:String,default:""},width:{type:[String,Number],default:"100%"},height:{type:[String,Number],default:void 0},ratio:{type:[String,Number],default:16/9},page:{type:[String,Number],default:1},noToolbar:Boolean,zoom:{type:[String,Number],default:100}},setup(e){const{el:t,width:i,height:r}=D(e),l=P(PDF_LOCALES);return h(()=>{M(I(e.url),t.value,{title:e.title,hint:l.value.hint,options:{page:e.page,noToolbar:e.noToolbar,zoom:e.zoom}})}),()=>b("div",{class:"pdf-preview",ref:t,style:{width:i.value,height:r.value}})}});export{R as default};
//# sourceMappingURL=PDF.js.map
