import{useSassPalettePlugin as C}from"vuepress-plugin-sass-palette";import{Logger as E,getTitleFromFilename as h,getLocales as L}from"vuepress-shared/node";import{createPage as v}from"@vuepress/core";import{ensureEndingSlash as K}from"@vuepress/shared";import{getDirname as $,path as M}from"@vuepress/utils";const y=$(import.meta.url),_=new E("vuepress-plugin-auto-catalog"),I=K(M.resolve(y,"../client")),x=async(l,{component:a="AutoCatalog",exclude:c=[],frontmatter:A=()=>({}),iconComponent:r,level:g=3,index:u=!1})=>{const{env:{isDebug:s},pages:p}=l,n=new Set,m=`<${a}${[1,2].includes(g)?` :level="${g}"`:""}${u?" index":""}>${r?`
  <template #icon="{icon}"><${r} :icon="icon" /></template>
`:""}</${a}>
`;p.forEach(({path:t,pathLocale:i})=>{let e=t;for(;e!==i;)e=e.replace(/\/(?:[^/]+\/?)$/,"/"),!n.has(e)&&c.every(o=>!e.match(o))&&p.every(({path:o})=>o!==e)&&(s&&_.info(`Generating catalog ${e}}`),n.add(e))}),await Promise.all(Array.from(n).map(t=>decodeURI(t)).map(t=>{const[,i]=/\/([^/]+)\/?$/.exec(t)||[],e=h(i);return v(l,{frontmatter:{title:e,...A(t)||{}},content:m,path:t})})).then(t=>{l.pages.push(...t)})},R={"/en/":{title:"Catalog"},"/zh/":{title:"目录"},"/zh-tw/":{title:"目錄"},"/de/":{title:"Katalog"},"/de-at/":{title:"Katalog"},"/vi/":{title:"Danh mục"},"/uk/":{title:"Каталог"},"/ru/":{title:"Каталог"},"/br/":{title:"Catálogo"},"/pl/":{title:"Katalog"},"/sk/":{title:"Katalóg"},"/fr/":{title:"Catalogue"},"/es/":{title:"Catálogo"},"/ja/":{title:"カタログ"},"/tr/":{title:"Katalog"},"/ko/":{title:"목차"},"/fi/":{title:"Luettelo"},"/hu/":{title:"Katalógus"}},D=(l={})=>a=>{a.env.isDebug&&_.info("Options:",l),C(a,{id:"hope"});const{component:c,iconComponent:A,getIcon:r,iconRouteMetaKey:g="i",getIndex:u,indexRouteMetaKey:s="I",locales:p,getOrder:n,orderRouteMetaKey:m="O",getTitle:t,titleRouteMetaKey:i="title"}=l;return{name:"vuepress-plugin-auto-catalog",define:()=>({AUTO_CATALOG_LOCALES:L({app:a,name:"auto-catalog",default:R,config:p}),AUTO_CATALOG_ICON_COMPONENT:A||"",AUTO_CATALOG_TITLE_META_KEY:i,AUTO_CATALOG_ICON_META_KEY:g,AUTO_CATALOG_ORDER_META_KEY:m,AUTO_CATALOG_INDEX_META_KEY:s}),extendsPage:e=>{if(!c){const o={},d=t==null?void 0:t(e),f=r==null?void 0:r(e),O=(u==null?void 0:u(e))??null,T=(n==null?void 0:n(e))??null;d&&(o[i]=d),f&&(o[g]=f),typeof O=="boolean"&&(o[s]=O?1:0),typeof T=="number"&&(o[m]=T),e.routeMeta={...e.routeMeta,...o}}},onInitialized:e=>x(e,l),...c?{}:{clientConfigFile:`${I}config.js`}}};export{D as autoCatalogPlugin};
//# sourceMappingURL=index.js.map
