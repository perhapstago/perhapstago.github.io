import{usePageData as b,useSiteData as $,defineClientConfig as x}from"@vuepress/client";import{defineComponent as U,computed as N,h as o,resolveComponent as y}from"vue";import{useLocaleConfig as k,startsWith as g,keys as w,endsWith as d,hasGlobalComponent as I}from"vuepress-shared/client";import{useRouter as M,RouterLink as A}from"vue-router";import"./styles/auto-catalog.scss";var R=U({name:"AutoCatalog",props:{base:{type:String,default:""},level:{type:Number,default:3},index:Boolean,titleGetter:{type:Function,default:t=>t[AUTO_CATALOG_TITLE_META_KEY]||""},iconGetter:{type:Function,default:t=>t[AUTO_CATALOG_ICON_META_KEY]},orderGetter:{type:Function,default:t=>t[AUTO_CATALOG_ORDER_META_KEY]||0},shouldIndex:{type:Function,default:t=>{const r=t[AUTO_CATALOG_INDEX_META_KEY];return r===void 0||r}}},setup(t,{slots:r}){const f=k(AUTO_CATALOG_LOCALES),C=b(),O=M(),T=$(),v=()=>{const u=t.base||C.value.path.replace(/\/[^/]+$/,"/"),m=O.getRoutes(),h=[];return m.filter(({meta:l,path:e})=>{if(!g(e,u)||e===u)return!1;if(u==="/"){const n=w(T.value.locales).filter(a=>a!=="/");if(e==="/404.html"||n.some(a=>g(e,a)))return!1}return(d(e,".html")&&!d(e,"/index.html")||d(e,"/"))&&t.shouldIndex(l)}).map(({path:l,meta:e})=>{const n=l.substring(u.length).split("/").length;return{title:t.titleGetter(e),icon:t.iconGetter(e),base:l.replace(/\/[^/]+\/?$/,"/"),order:t.orderGetter(e)||null,level:d(l,"/")?n-1:n,path:l}}).filter(({title:l,level:e})=>typeof l=="string"&&l&&e<=t.level).sort(({title:l,level:e,path:n,order:a},{title:c,level:i,path:p,order:s})=>e-i||(d(n,"/index.html")?-1:d(p,"/index.html")?1:a===null?s===null?l.localeCompare(c):s:s===null?a:a>0?s>0?a-s:-1:s<0?a-s:1)).forEach(l=>{var e;const{base:n,level:a}=l;switch(a){case 1:h.push(l);break;case 2:{const c=h.find(i=>i.path===n);c&&(c.children??(c.children=[])).push(l);break}default:{const c=h.find(i=>i.path===n.replace(/\/[^/]+\/$/,"/"));if(c){const i=(e=c.children)==null?void 0:e.find(p=>p.path===n);i&&(i.children??(i.children=[])).push(l)}}}}),h},E=N(()=>v());return()=>o("div",{class:"auto-catalog-wrapper"},[o("h2",{class:"main-title"},f.value.title),...E.value.map(({children:u=[],icon:m,path:h,title:l},e)=>[o("h3",{id:l,class:["child-title",{"has-children":u.length}]},[o("a",{href:`#${l}`,class:"header-anchor"},"#"),o(A,{class:"catalog-title",to:h},()=>[t.index?`${e+1}.`:null,m&&r.icon?r.icon({icon:m}):null,l||"Unknown"])]),u.length?o("ul",{class:"child-catalog-wrapper"},u.map(({children:n=[],icon:a,path:c,title:i},p)=>o("li",{class:"child-catalog-item"},[o("div",{class:["sub-title",{"has-children":n.length}]},[o("a",{href:`#${i}`,class:"header-anchor"},"#"),o(A,{class:"catalog-title",to:c},()=>[t.index?`${e+1}.${p+1}`:null,a&&r.icon?r.icon({icon:a}):null,i||"Unknown"])]),n.length?o("div",{class:"sub-catalog-wrapper"},n.map(({icon:s,path:_,title:G},L)=>o(A,{class:"sub-catalog-item",to:_},()=>[t.index?`${e+1}.${p+1}.${L+1}`:null,s&&r.icon?r.icon({icon:s}):null,G||"Unknown"]))):null]))):null])])}}),D=x({enhance:({app:t})=>{I("AutoCatalog",t)||t.component("AutoCatalog",r=>o(R,r,AUTO_CATALOG_ICON_COMPONENT?{icon:({icon:f})=>o(y(AUTO_CATALOG_ICON_COMPONENT),{icon:f})}:{}))}});export{D as default};
//# sourceMappingURL=config.js.map
