import{useMutationObserver as u}from"@vueuse/core";import{defineComponent as y,ref as i,computed as C,onMounted as b,watch as T,h as f,nextTick as v}from"vue";import{atou as g,LoadingIcon as h}from"vuepress-shared/client";import"../styles/mermaid.scss";const x=e=>({dark:e,background:e?"#1e1e1e":"#fff",primaryColor:e?"#389d70":"#4abf8a",primaryBorderColor:e?"#389d70":"#4abf8a",primaryTextColor:"#fff",secondaryColor:"#ffb500",secondaryBorderColor:e?"#fff":"#000",secondaryTextColor:e?"#ddd":"#333",tertiaryColor:e?"#282828":"#efeef4",tertiaryBorderColor:e?"#bbb":"#242424",tertiaryTextColor:e?"#ddd":"#333",noteBkgColor:e?"#f6d365":"#fff5ad",noteTextColor:"#242424",noteBorderColor:e?"#f6d365":"#333",lineColor:e?"#d3d3d3":"#333",textColor:e?"#fff":"#242424",mainBkg:e?"#389d70":"#4abf8a",errorBkgColor:"#eb4d5d",errorTextColor:"#fff",nodeBorder:e?"#389d70":"#4abf8a",nodeTextColor:e?"#fff":"#242424",signalTextColor:e?"#9e9e9e":"#242424",classText:"#fff",labelColor:"#fff",fillType0:e?"#cf1322":"#f1636e",fillType1:"#f39c12",fillType2:"#2ecc71",fillType3:"#fa541c",fillType4:"#25a55b",fillType5:"#13c2c2",fillType6:"#096dd9",fillType7:"#aa6fe9"});var M=y({name:"Mermaid",props:{id:{type:String,required:!0},code:{type:String,required:!0}},setup(e){const s=i(),a=i(""),l=i(!1),c=C(()=>g(e.code)),n=async()=>Promise.all([import("mermaid/dist/mermaid.esm.min.mjs"),import("@mermaid-js/mermaid-mindmap/dist/mermaid-mindmap.esm.min.mjs"),new Promise(r=>setTimeout(r,MARKDOWN_ENHANCE_DELAY))]).then(async([{default:r},{default:d}])=>{try{await r.registerExternalDiagrams([d])}catch{}const t=document.createElement("div");t.style.position="relative",t.style.top="-9999px";const m=p=>{a.value=p,document.body.removeChild(t)},o={useMaxWidth:!1};r.initialize({theme:"base",themeVariables:x(l.value),flowchart:o,sequence:o,journey:o,gantt:o,er:o,pie:o,...MERMAID_OPTIONS,startOnLoad:!1}),a.value="",document.body.appendChild(t),await v(),await r.renderAsync(e.id,c.value,m,t)});return b(()=>{const r=document.documentElement,d=()=>r.classList.contains("dark")||r.getAttribute("data-theme")==="dark";l.value=d(),n(),u(r,()=>{l.value=d()},{attributeFilter:["class","data-theme"],attributes:!0}),T(l,()=>n())}),()=>f("div",{ref:s,class:"mermaid-wrapper"},a.value?f("div",{class:"mermaid-content",innerHTML:a.value}):f(h,{class:"mermaid-loading",height:96}))}});export{M as default};
//# sourceMappingURL=Mermaid.js.map
