import{usePageData as g,usePageFrontmatter as f,usePageLang as h,withBase as m}from"@vuepress/client";import{pageviewCount as C}from"@waline/client/dist/pageview.mjs";import{pageviewCount as _}from"@waline/client/dist/pageview.mjs";import{defineComponent as L,computed as r,onMounted as w,watch as N,nextTick as A,h as u,defineAsyncComponent as E}from"vue";import{useLocaleConfig as P,LoadingIcon as T}from"vuepress-shared/client";import"@waline/client/dist/waline.css";import"../styles/waline.scss";const e=COMMENT_OPTIONS,W=WALINE_LOCALES,i=Boolean(e.serverURL);WALINE_META&&import("@waline/client/dist/waline-meta.css");var B=L({name:"WalineComment",setup(){const t=g(),l=f(),p=h(),s=P(W);let o;const v=r(()=>{if(!i)return!1;const n=e.comment!==!1,a=l.value.comment;return Boolean(a)||n!==!1&&a!==!1}),c=r(()=>{if(!i)return!1;const n=e.pageview!==!1,a=l.value.pageview;return Boolean(a)||n!==!1&&a!==!1}),d=r(()=>({lang:p.value==="zh-CN"?"zh-CN":"en",locale:s.value,dark:"html.dark",...e,path:m(t.value.path)}));return w(()=>{N(()=>t.value.path,()=>{o==null||o(),c.value&&A().then(()=>{setTimeout(()=>{o=C({serverURL:e.serverURL,path:m(t.value.path)})},e.delay||800)})},{immediate:!0})}),()=>v.value?u("div",{class:"waline-wrapper",id:"comment"},i?u(E({loader:async()=>(await import("@waline/client/dist/component.mjs")).Waline,loadingComponent:T}),d.value):[]):null}});export{B as default,_ as pageviewCount};
//# sourceMappingURL=Waline.js.map
