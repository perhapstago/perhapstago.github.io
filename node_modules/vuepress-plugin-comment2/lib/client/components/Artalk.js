import{usePageFrontmatter as p,usePageData as k,useSiteData as v}from"@vuepress/client";import{defineComponent as f,ref as h,computed as M,onMounted as w,watch as d,h as m,nextTick as B}from"vue";import"artalk/dist/Artalk.css";import"../styles/artalk.scss";const t=COMMENT_OPTIONS,P=Boolean(t.server);var T=f({name:"Artalk",props:{darkmode:Boolean},setup:r=>{const s=p(),l=k(),i=v(),u=h();let a=null;const n=M(()=>{if(!P)return!1;const e=t.comment!==!1,o=s.value.comment;return Boolean(o)||e!==!1&&o!==!1}),c=async()=>{n.value&&await Promise.all([import("artalk"),new Promise(e=>{setTimeout(()=>{B().then(e)},t.delay)})]).then(([{default:e}])=>{const o=e;try{a=new o({useBackendConf:!1,site:i.value.title,pageTitle:l.value.title,...t,el:u.value,pageKey:l.value.path,darkMode:r.darkmode}),t.useBackendConf&&a.on("conf-loaded",()=>{a.setDarkMode(r.darkmode)})}catch{}})};return w(()=>{d(()=>[n.value,l.value.path],()=>c(),{immediate:!0}),d(()=>r.darkmode,e=>{a==null||a.setDarkMode(e)})}),()=>n.value?m("div",{class:"artalk-wrapper"},m("div",{ref:u})):null}});export{T as default};
//# sourceMappingURL=Artalk.js.map
